## Что такое CAP-теорема?

![CAP theory](./CAP%20теорема.png "CAP theory")

`Теорема CAP` — это теорема о распределённых вычислительных системах; она формулировалась в различных формах на протяжении многих лет. 
Первоначальная формулировка теоремы Эрика Брюэра (также известная как теорема Брюэра) гласит, что 
`компьютерная система может в лучшем случае обладать двумя из трёх свойств из следующего списка`: `согласованность`, `доступность` или `устойчивость к разделению`.
- `Согласованность (Consistency)`: представление данных обо всех членах распределенной вычислительной системы является актуальным.
- `Доступность (Availability)`: данные всегда доступны для чтения и обновления.
- `Устойчивость к разделению (Partition tolerance)`: распределенная система продолжает работать при сбое сети, когда не все участники могут 
связаться с другими участниками.

### Системное проектирование теоремы CAP
На практике распределенная система не может быть защищена от сетевых сбоев, поэтому разработчики таких систем должны принять возможность таких сбоев 
как данность, а затем решить, как реагировать.  Предположим, что система выбирает в пользу доступности (такие системы называются  `системами AP` ). 
В этом случае она продолжит обслуживать запросы, даже если данные могут находиться в несогласованном состоянии (например, отказавший элемент мог 
получить и подтвердить обновление данных, но затем выйти из строя до того, как это обновление было синхронизировано с другими элементами системы).  
Если система выбирает в пользу согласованности (известной как `система CP`). В этом случае она решит прекратить обслуживание запросов (станет 
недоступной), если согласованность данных не может быть гарантирована. Для системы `CP` это достигается тем, что определенное количество узлов 
должно подтвердить, что обновление данных было выполнено, прежде чем подтвердить обновление; это определенное количество будет больше половины узлов, 
составляющих распределенную систему.

Системы `CP` невероятно сложно правильно реализовать, поскольку существует множество скрытых способов, которыми распределённые системы могут не 
оправдать ожиданий. Система, которая считается неработающей, может просто испытывать перегрузку сети, поэтому обновления могут приходить не по 
порядку с узла, который считался отключенным.
